(this["webpackJsonpreact-firebase-chat"]=this["webpackJsonpreact-firebase-chat"]||[]).push([[0],{11:function(e,t,a){e.exports={Chat:"Chat_Chat__1dCOB",Status:"Chat_Status__wmCuQ",Header:"Chat_Header__1-f8l",HeaderName:"Chat_HeaderName__2jwp0",HeaderButtonsWrapper:"Chat_HeaderButtonsWrapper__3ezlw",HeaderButton:"Chat_HeaderButton__1mTQ-",HeaderButtonCancel:"Chat_HeaderButtonCancel__Z8-30",HeaderBackArrow:"Chat_HeaderBackArrow__34iPv",ChatWindow:"Chat_ChatWindow__2bU7X",ReplyMessagesPadding:"Chat_ReplyMessagesPadding__1x18B",InputWrapper:"Chat_InputWrapper__1z4le",ReplyWrapper:"Chat_ReplyWrapper__pxgtE",ReplyUser:"Chat_ReplyUser__6bbAp",ReplyCancel:"Chat_ReplyCancel__4paUs",Input:"Chat_Input__30TYJ",SendIconWrapper:"Chat_SendIconWrapper__v8sli",SendIcon:"Chat_SendIcon__14xac"}},113:function(e,t,a){e.exports={NoSelectChat:"NoSelectChat_NoSelectChat__owvwn"}},163:function(e,t,a){e.exports={MainWindow:"App_MainWindow__dY3o_"}},164:function(e,t,a){e.exports={Background:"Background_Background__2j1KK"}},165:function(e,t,a){e.exports={Modal:"Modal_Modal__3Sh18"}},166:function(e,t,a){e.exports={Button:"Button_Button__KoDOk"}},175:function(e,t,a){},34:function(e,t,a){e.exports={AddChat:"CreateChat_AddChat__3CQWf",Title:"CreateChat_Title__3r7Br",Wrapper:"CreateChat_Wrapper__Av9P2",ImageWrapper:"CreateChat_ImageWrapper__2ZT1V",Image:"CreateChat_Image__1dXOt",descArea:"CreateChat_descArea__y0oB7",InputName:"CreateChat_InputName__2yHxc",Input:"CreateChat_Input__hmTIj",Button:"CreateChat_Button__2ig70",descImageWrapper:"CreateChat_descImageWrapper__2zOic"}},35:function(e,t,a){e.exports={MessageWrapper:"Message_MessageWrapper__2k72Q",Message:"Message_Message__3Y1ra",MessageWithImages:"Message_MessageWithImages__OOsNZ",MessageAuthor:"Message_MessageAuthor__F48_T",Reply:"Message_Reply__2Y5dN",ReplyUser:"Message_ReplyUser__1jTRa",Select:"Message_Select__FTFwb",MessageText:"Message_MessageText__2e5zm",ForwardMessage:"Message_ForwardMessage__FF4hA",AuthorName:"Message_AuthorName__3Rm6A",Date:"Message_Date__13Lq4"}},39:function(e,t,a){e.exports={ChatItem:"ChatItem_ChatItem__2-QP8",Wrapper:"ChatItem_Wrapper__RL-QC",TopWrapper:"ChatItem_TopWrapper__2vSQf",BottomWrapper:"ChatItem_BottomWrapper__3ZUOb",Avatar:"ChatItem_Avatar__2n2k8",Link:"ChatItem_Link__1fWBz",active:"ChatItem_active__3EFuv",Name:"ChatItem_Name__2nodu"}},44:function(e,t,a){e.exports={UserSetting:"UserSetting_UserSetting__2QRY8",TopWrapper:"UserSetting_TopWrapper__2KfsL",Title:"UserSetting_Title__1z5tS",ImageWrapper:"UserSetting_ImageWrapper__1jtyV",NameWrapper:"UserSetting_NameWrapper__1Z2KH",NameTitle:"UserSetting_NameTitle__26gru",NameInput:"UserSetting_NameInput__2v1Hv",IdWrapper:"UserSetting_IdWrapper__39JdI",SaveButton:"UserSetting_SaveButton__rSAhp"}},45:function(e,t,a){e.exports={Component:"ImageInputModal_Component__3huzj",Images:"ImageInputModal_Images__JRFOD",TitleNoImages:"ImageInputModal_TitleNoImages__3U_lk",Image:"ImageInputModal_Image__1CDP2",ControlButtons:"ImageInputModal_ControlButtons___prMf",InputText:"ImageInputModal_InputText__2xiWT",Button:"ImageInputModal_Button__2RVJf"}},473:function(e,t,a){"use strict";a.r(t);var s=a(2),n=a(4),r=a.n(n),c=a(31),i=a.n(c),o=a(12),l=a(13),h=a(15),u=a(14),p=a(23),d=(a(175),a(51)),g=a.n(d),m="AUTH_START",j="AUTH_SUCCESS",f="AUTH_FAIL",b="SET_USER_INFO",v="AUTH_EXIT",O="CHAT_LOADING",_="CHAT_SUCCESS",I="CHAT_FAIL",C="CLEAN_CHATS_DATA",x="SET_USER_CHATS_LIST",M="SET_SEARCH_CHATS_LIST",N="APPEND_CHAT_MESSAGE",y="REMOVE_CHAT_MESSAGE",S="SET_MESSAGE",w=a(8),D=a(6),A=(a(178),function(e){return function(t,a){w.a.database().ref("/chats/"+e+"/chatData/members").push(a().auth.UID),w.a.database().ref("/users/"+a().auth.UID+"/private/chats").push({chat:e})}}),T=function(){return function(e,t){console.log("subscribeInit");var a=t().auth.UID;w.a.database().ref("users/"+a+"/private/chats/").on("value",(function(t){e(k("init",t.val()))})),w.a.database().ref("users/"+a).on("value",(function(t){e({type:b,user:a,userData:t.val()})}))}},R=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(a,s){if(!s().chats.chats[e]){var n=s().auth.UID;a({type:O,chatId:e}),w.a.database().ref("chats/"+e+"/chatData").on("value",(function(s){var r=s.val();r?w.a.database().ref("chats/"+e+"/messagesData/lastChangeDate").once("value",(function(t){var s=Object(D.a)(Object(D.a)({},r),{},{id:e});t.val()?s.lastChangeMessagesDate=t.val():s.lastChangeMessagesDate=r.create,a({type:_,chatId:e,chatData:s})})):(a({type:I,chatId:e}),t&&w.a.database().ref("users/"+n+"/private/chats/"+t).remove())})),w.a.database().ref("chats/"+e+"/messagesData/messages").orderByChild("date").on("child_added",(function(t){var n=t.val().message,r=t.val().replyChatMessageId;w.a.database().ref("/messages/"+n).on("value",(function(c){var i=c.val();if(i){var o,l,h=Object(D.a)(Object(D.a)({},i),{},{id:n});r&&(h.replyChatMessageId=r),a({type:S,messageId:n,messageData:h}),a({type:N,chatId:e,chatMessageId:t.key,chatMessage:t.val(),lastChangeMessagesDate:i.date}),(null===(o=s())||void 0===o||null===(l=o.chats)||void 0===l?void 0:l.users[i.user])||w.a.database().ref("users/"+i.user+"/public").on("value",(function(e){a({type:b,user:i.user,userData:{public:e.val()},isMainUser:!1})}))}}))})),w.a.database().ref("chats/"+e+"/messagesData/messages").on("child_removed",(function(t){a({type:y,chatId:e,chatMessageId:t.key})}))}}},k=function(e,t){return function(a,s){if(console.log("handleChats",e,t),"init"==e&&t){var n=[];Object.keys(t).forEach((function(e){var s=t[e].chat;a(R(s,e)),n.push(t[e].chat)})),a({type:x,chatsList:n})}if("search"==e){if(!t)return void a({type:M,chatsList:[]});var r=[];Object.keys(t).forEach((function(e){a(R(e)),r.push(e)})),a({type:M,chatsList:r})}}},U=a(17),W=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={isLogin:!0},e.emailRef=r.a.createRef(),e.passwordRef=r.a.createRef(),e.auth=function(){e.props.auth(e.emailRef.current.value,e.passwordRef.current.value,e.state.isLogin)},e.componentWillUnmount=function(){e.props.history.push("/chats")},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return Object(s.jsxs)("div",{className:g.a.Auth,children:[Object(s.jsx)("h1",{className:g.a.Title,children:this.state.isLogin?"\u0412\u043e\u0439\u0434\u0438\u0442\u0435 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442":"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(s.jsx)("input",{className:g.a.Input,placeholder:"\u041f\u043e\u0447\u0442\u0430",ref:this.emailRef}),Object(s.jsx)("input",{className:g.a.Input,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",ref:this.passwordRef}),this.props.error&&Object(s.jsx)("div",{className:g.a.Error,children:this.props.error}),Object(s.jsx)("div",{className:g.a.IsLogin,onClick:function(){e.setState((function(e){return{isLogin:!e.isLogin}}))},children:this.state.isLogin?"\u041d\u0435\u0442 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430?":"\u0412\u043e\u0439\u0434\u0438\u0442\u0435 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"}),Object(s.jsx)("button",{className:g.a.Button,onClick:this.auth,children:this.state.isLogin?"\u0412\u043e\u0439\u0442\u0438":"\u0417\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})}}]),a}(n.Component),L=Object(p.b)((function(e){return{loading:e.auth.loading,error:e.auth.error}}),(function(e){return{auth:function(t,a,s){return e(function(e,t,a){return function(s){s({type:m}),a?w.a.auth().signInWithEmailAndPassword(e,t).then((function(e){s({type:j,UID:e.user.uid})})).catch((function(e){e.code;var t=e.message;console.log(t),s({type:f,error:t})})):w.a.auth().createUserWithEmailAndPassword(e,t).then((function(e){s({type:j,UID:e.user.uid})})).catch((function(e){e.code;var t=e.message;s({type:f,error:t})}))}}(t,a,s))},subscribeInit:function(){return e(T())}}}))(Object(U.g)(W)),E=a(163),B=a.n(E),F="/chats/:id",H=(n.Component,a(57)),P=a.n(H),z=a(41);function X(e){var t={text:e.message.text,images:e.message.images};return e.message.body&&(t={text:e.message.body.text,images:e.message.body.images}),t.text.length>15&&(t.text=t.text.substr(0,15)+"..."),Object(s.jsxs)("div",{children:[Object(s.jsx)("span",{style:{color:"gray"},children:t.images&&"\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f"}),t.images&&t.text&&", ",t.text&&t.text]})}var V=["\u0432\u0441","\u043f\u043d","\u0432\u0442","\u0441\u0440","\u0447\u0442","\u043f\u0442","\u0441\u0431"],Q=function(e){var t=e+"";return t.length<2?"0"+t:t},G=function(e){var t=new Date(e),a=(Date.now()-t)/864e5;if(a<1)return Q(t.getHours())+":"+Q(t.getMinutes());if(a<7)return V[t.getDay()];if(a<12){var s=t.getDay()+1,n=t.getMonth()+1,r=t.getFullYear()+"";return r=r.substring(2,4),Q(s)+"."+Q(n)+"."+r}},J=function(e){var t=new Date(e),a=t.getHours()+"",s=t.getMinutes()+"";return 1==a.length&&(a="0"+a),1==s.length&&(s="0"+s),a+":"+s},Y=a(39),Z=a.n(Y),K=function(e){return Object(s.jsx)(z.b,{to:"/chats/"+e.id,className:Z.a.Link,activeClassName:Z.a.active,children:Object(s.jsxs)("div",{className:Z.a.ChatItem,children:[Object(s.jsx)("div",{className:Z.a.Avatar,onClick:function(){e.delete(e.id)},children:Object(s.jsx)("img",{className:Z.a.Avatar,src:e.avatar?e.avatar:"/Images/noPhoto.jpg"})}),Object(s.jsxs)("div",{className:Z.a.Wrapper,children:[Object(s.jsxs)("div",{className:Z.a.TopWrapper,children:[Object(s.jsx)("div",{className:Z.a.Name,children:e.name}),Object(s.jsx)("div",{className:Z.a.LastMessageTime,children:G(e.lastMessage?e.lastMessage.date:e.chatCreateDate)})]}),Object(s.jsx)("div",{className:Z.a.BottomWrapper,children:e.lastMessage?Object(s.jsx)(X,{message:e.lastMessage}):Object(s.jsx)("div",{children:"\u0412\u044b \u0441\u043e\u0437\u0434\u0430\u043b\u0438 \u0447\u0430\u0442!!!"})})]})]})})},q=a(164),$=a.n(q);function ee(e){var t={},a=e.level?e.level:1;return t.zIndex=100*a,Object(s.jsx)("div",{className:$.a.Background,onClick:e.close,style:t})}var te=a(73),ae=a.n(te),se=a(165),ne=a.n(se),re=function(e){var t={};if(!e.show)return null;e.noPadding&&(t.padding=0);var a=e.level?e.level:1;return t.zIndex=101*a,Object(s.jsxs)(r.a.Fragment,{children:[Object(s.jsx)(ee,{close:e.close,level:e.level}),Object(s.jsx)("div",{className:ne.a.Modal,style:t,children:e.children})]})},ce=a(34),ie=a.n(ce),oe=a(166),le=a.n(oe);function he(e){var t=[le.a.Button];return e.className&&t.push(e.className),Object(s.jsx)("button",{className:t.join(" "),onClick:e.onClick,children:e.children})}var ue=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var s=arguments.length,r=new Array(s),c=0;c<s;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={showImageInputModal:!1,image:!1},e.nameRef=Object(n.createRef)(),e.descRef=Object(n.createRef)(),e.imageInputRef=Object(n.createRef)(),e.createChat=function(){e.props.createChat(e.nameRef.current.value,e.descRef.current.value,e.state.image)},e.save=function(t){e.setState({images:t})},e.selectFile=function(t){var a=t.target.files[0];if(a){var s=new FileReader;s.onloadend=function(t){t.target.result.match(t)&&e.setState({image:t.target.result})},s.readAsDataURL(a)}},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return Object(s.jsx)(re,{show:this.props.show,close:this.props.hideModal,children:Object(s.jsxs)("div",{className:ie.a.AddChat,children:[Object(s.jsx)("h1",{className:ie.a.Title,children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0447\u0430\u0442"}),Object(s.jsxs)("div",{className:ie.a.Wrapper,children:[Object(s.jsx)("p",{className:ie.a.InputName,children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u0447\u0430\u0442\u0430"}),Object(s.jsx)("input",{ref:this.nameRef,className:ie.a.Input})]}),Object(s.jsxs)("div",{className:ie.a.Wrapper,children:[Object(s.jsxs)("div",{className:ie.a.descImageWrapper,children:[Object(s.jsx)("p",{className:ie.a.InputName,children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0447\u0430\u0442\u0430"}),Object(s.jsxs)("div",{className:ie.a.ImageWrapper,onClick:function(){e.setState({showImageInputModal:!0})},children:[Object(s.jsx)("img",{className:ie.a.Image,onClick:function(){e.imageInputRef.current.click()},src:this.state.image?this.state.image:"/Images/noPhoto.jpg"}),Object(s.jsx)("input",{ref:this.imageInputRef,style:{display:"none"},type:"file",id:"inputFile",onChange:this.selectFile,accept:"image/*"})]})]}),Object(s.jsx)("textarea",{ref:this.descRef,className:ie.a.descArea})]}),Object(s.jsx)(he,{onClick:this.createChat,children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0447\u0430\u0442"})]})})}}]),a}(n.Component),pe=a(44),de=a.n(pe),ge=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={imagesModal:!1},e.NameInputRef=r.a.createRef(),e.selectFile=function(t){var a=t.target.files[0];if(a){var s=new FileReader;s.onloadend=function(t){t.target.result.match(t)&&e.setState({imagesModal:t.target.result})},s.readAsDataURL(a)}},e.imageInputRef=r.a.createRef(),e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(){this.props.public&&this.NameInputRef.current&&(this.NameInputRef.current.value=this.props.public.name)}},{key:"render",value:function(){var e=this;return Object(s.jsx)(r.a.Fragment,{children:Object(s.jsx)(re,{show:this.props.show,close:this.props.hideModal,level:2,children:Object(s.jsxs)("div",{className:de.a.UserSetting,children:[Object(s.jsx)("div",{className:de.a.Title,children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430"}),Object(s.jsxs)("div",{className:de.a.TopWrapper,children:[Object(s.jsxs)("div",{className:de.a.ImageWrapper,onClick:function(){e.imageInputRef.current.click()},children:[Object(s.jsx)("input",{ref:this.imageInputRef,style:{display:"none"},type:"file",onChange:this.selectFile,accept:"image/*"}),Object(s.jsx)("img",{src:this.state.imagesModal?this.state.imagesModal:"/Images/noPhoto.jpg"})]}),Object(s.jsxs)("div",{className:de.a.NameWrapper,children:[Object(s.jsx)("div",{className:de.a.NameTitle,children:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),Object(s.jsx)("input",{ref:this.NameInputRef,className:de.a.NameInput})]})]}),Object(s.jsx)(he,{className:de.a.SaveButton,onClick:function(){e.props.save("images",e.NameInputRef.current.value)},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0438\u043d\u0435\u043d\u0438\u044f"})]})})})}}]),a}(n.Component),me=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={showCreateChat:!1,showSetting:!1},e.createChat=function(t,a,s){e.props.createChat(t,a,s),e.setState({showCreateChat:!1}),e.props.close()},e.enterToChat=function(t){e.props.enterToChat(t),e.props.close()},e}return Object(l.a)(a,[{key:"render",value:function(){var e,t=this;return this.props.show?Object(s.jsxs)(r.a.Fragment,{children:[Object(s.jsx)(ee,{close:this.props.close}),Object(s.jsxs)("div",{className:ae.a.Navigation,children:[Object(s.jsxs)("ul",{children:[Object(s.jsx)("li",{className:ae.a.ListItem,onClick:function(){t.setState({showCreateChat:!0})},children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0447\u0430\u0442"}),Object(s.jsx)("li",{className:ae.a.ListItem,onClick:function(){t.setState({showSetting:!0})},children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430"}),Object(s.jsx)("li",{className:ae.a.ListItem,onClick:function(){t.props.userExit()},children:"\u0412\u044b\u0439\u0442\u0438 \u0441 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430"})]}),Object(s.jsx)(ue,{show:this.state.showCreateChat,hideModal:function(){t.setState({showCreateChat:!1})},createChat:this.createChat}),Object(s.jsx)(ge,{show:this.state.showSetting,hideModal:function(){t.setState({showSetting:!1})},UID:this.props.UID,public:null===(e=this.props.userInfo)||void 0===e?void 0:e.public,save:this.props.changeUserSetting})]})]}):null}}]),a}(n.Component),je=Object(p.b)((function(e){return{UID:e.auth.UID,userInfo:e.chats.users[e.auth.UID]}}),(function(e){return{createChat:function(t,a,s){return e(function(e,t,a){return function(s,n){var r=n().auth.UID;w.a.database().ref("/chats").push({chatData:{creator:n().auth.UID,name:e,description:t,create:w.a.database.ServerValue.TIMESTAMP},messagesData:{lastChangeDate:w.a.database.ServerValue.TIMESTAMP},searchName:e}).then((function(e){a&&w.a.database().ref("/chats/"+e.path.pieces_[1]+"/chatData/images").push(a),w.a.database().ref("/users/"+r+"/private/chats").push({chat:e.path.pieces_[1]}),w.a.database().ref("/chats/"+e.path.pieces_[1]+"/chatData/members").push(r)}))}}(t,a,s))},enterToChat:function(t){return e(A(t))},changeUserSetting:function(t,a){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(a,s){e&&w.a.database().ref("users/"+s().auth.UID+"/public/images").set(e),t&&w.a.database().ref("users/"+s().auth.UID+"/public/name").set(t)}}(t,a))},userExit:function(){return e((function(e,t){e({type:v}),e({type:C})}))}}}))(me),fe=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={showNavigation:!1},e.selectChat=function(t){t&&e.props.history.push("/chats/"+t)},e.showModal=function(){e.setState({showNavigation:!0})},e.hideModal=function(){e.setState({showNavigation:!1})},e.searchRef=r.a.createRef(),e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.UID&&!this.props.users[this.props.UID]&&this.props.subscribeInit()}},{key:"render",value:function(){var e,t=this,a=Math.max(document.documentElement.clientHeight,window.innerHeight||0),n=this.props.chats,r=this.props.userChatsList;return(null===(e=this.searchRef.current)||void 0===e?void 0:e.value)&&(r=this.props.searchChatsList.length>0?this.props.searchChatsList:"NOT_EXIST"),console.log(this.props.searchChatsList,r),Object(s.jsxs)("div",{className:P.a.ChatsList,children:[Object(s.jsxs)("div",{className:P.a.Navigation,children:[Object(s.jsx)("div",{className:P.a.Burger,onClick:this.showModal,children:Object(s.jsx)("img",{src:"/Images/menuBurger.svg"})}),Object(s.jsx)("div",{className:P.a.Input,children:Object(s.jsx)("input",{ref:this.searchRef,onChange:function(){t.props.test(t.searchRef.current.value)}})})]}),Object(s.jsx)("div",{className:P.a.ChatsItems,style:{height:a-50},children:"NOT_EXIST"!=r?r.sort((function(e,t){var a=n[e],s=n[t],r=a.lastChangeMessagesDate?a.lastChangeMessagesDate:a.create;return(s.lastChangeMessagesDate?s.lastChangeMessagesDate:s.create)-r})).map((function(e){var a=n[e];if("NOT_EXIST"==a)return null;if("LOADING"==a)return null;var r=a.messages,c=null;if(Object.keys(r).length>0){var i=-1;Object.values(r).forEach((function(e){var a=t.props.messages[e.message];a.date>i&&(i=a.date,c=a)}))}return Object(s.jsx)(K,{id:a.id,name:a.name,avatar:a.images&&a.images[Object.keys(a.images)[Object.keys(a.images).length-1]],chatCreateDate:a.create,delete:t.props.deleteChat,lastMessage:c},e)})):Object(s.jsx)("div",{className:P.a.NoSearchChat,children:"\u0427\u0430\u0442\u043e\u0432 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"})}),Object(s.jsx)(je,{show:this.state.showNavigation,close:this.hideModal})]})}}]),a}(n.Component),be=Object(p.b)((function(e){return{chats:e.chats.chats,messages:e.chats.messages,userChatsList:e.chats.userChatsList,searchChatsList:e.chats.searchChatsList,UID:e.auth.UID,users:e.chats.users}}),(function(e){return{enterToChat:function(t){return e(A(t))},subscribeInit:function(){return e(T())},deleteChat:function(t){return e(function(e){return function(t,a){a().auth.UID,w.a.database().ref("chats/"+e).remove()}}(t))},test:function(t){return e(function(e){return function(t,a){w.a.database().ref("chats/").orderByChild("searchName").startAt(e).endAt(e+"\uf8ff").once("value",(function(e){console.log(e.val()),t(k("search",e.val()))}))}}(t))}}}))(Object(U.g)(fe)),ve=a(62),Oe=a(11),_e=a.n(Oe),Ie=a(86),Ce=a.n(Ie),xe=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={focusImage:-1},e.getImageWidth=function(e,t){return{0:[0],1:[100],2:[100,100],3:[100,50,50],4:[100,100/3,100/3,100/3],5:[100,50,50,50,50],6:[100,50,50,100/3,100/3,100/3],7:[100,100/3,100/3,100/3,100/3,100/3,100/3],8:[50,50,50,50,50,50,50,50],9:[50,50,50,50,50,50,100/3,100/3,100/3],10:[50,50,50,50,100/3,100/3,100/3,100/3,100/3,100/3]}[e][t]},e.changeFocusImage=function(t,a){var s=e.state.focusImage,n=e.props.images.length;t.nativeEvent.wheelDelta<0?s>=n-1?s=0:s+=1:s<=0?s=n-1:s-=1,e.setState({focusImage:s})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return Object(s.jsxs)("div",{className:Ce.a.ImagesWrapper,children:[this.props.images.map((function(t,a){return Object(s.jsx)("div",{style:{width:e.getImageWidth(e.props.images.length,a)+"%"},children:Object(s.jsx)("img",{src:t,className:Ce.a.Image,onClick:function(){e.setState({focusImage:a})}})},a)})),this.state.focusImage>-1&&Object(s.jsxs)(r.a.Fragment,{children:[Object(s.jsx)("img",{className:Ce.a.FocusImage,src:this.props.images[this.state.focusImage],onClick:function(){e.setState({focusImage:-1})},onWheel:this.changeFocusImage}),Object(s.jsx)(ee,{close:function(){e.setState({focusImage:-1})}})]})]})}}]),a}(r.a.Component),Me=a(35),Ne=a.n(Me);var ye=function(e){var t,a;e.author;var n={text:e.message.text,images:e.message.images};e.message.isForward&&(n={text:e.message.body.text,images:e.message.body.images});var r=[Ne.a.Message];e.author&&r.push(Ne.a.MessageAuthor),!e.images||e.replyMessage||e.isForward||r.push(Ne.a.MessageWithImages);var c,i,o=(null===e||void 0===e||null===(t=e.user)||void 0===t||null===(a=t.public)||void 0===a?void 0:a.name)?e.user.public.name:e.message.user,l="";return e.forwardUser&&(l=(null===(c=e.forwardUser)||void 0===c||null===(i=c.public)||void 0===i?void 0:i.name)?e.forwardUser.public.name:e.message.body.user),Object(s.jsx)("div",{className:Ne.a.MessageWrapper,onMouseDown:e.toggleSelectMessageHandler,onMouseUp:e.toggleSelectMessageHandler,onDoubleClick:e.onDoubleClick,children:Object(s.jsxs)("div",{className:r.join(" "),children:[e.message.isForward&&Object(s.jsxs)("div",{className:Ne.a.ForwardMessage,children:["\u041f\u0435\u0440\u0435\u0441\u043b\u0430\u043d\u043e \u043e\u0442 ",l]}),!e.author&&!e.message.isForward&&Object(s.jsx)("div",{className:Ne.a.AuthorName,children:o}),e.replyMessage&&Object(s.jsxs)("div",{className:Ne.a.Reply,children:[Object(s.jsx)("div",{className:Ne.a.ReplyUser,children:e.replyMessage.user}),Object(s.jsx)(X,{message:e.replyMessage})]}),n.images&&Object(s.jsx)(xe,{images:n.images}),n.text&&Object(s.jsx)("p",{className:Ne.a.MessageText,children:n.text}),e.select&&Object(s.jsx)("div",{className:Ne.a.Select}),Object(s.jsx)("div",{className:Ne.a.Date,children:J(e.message.date)})]})})},Se=a(74),we=a.n(Se),De=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props.chats;return Object(s.jsx)(re,{close:this.props.close,show:!0,children:Object(s.jsx)("div",{className:we.a.wrapper,children:Object.keys(t).map((function(a){var n=t[a];return Object(s.jsxs)("div",{className:we.a.chat,onClick:function(){e.props.startForward(a)},children:[Object(s.jsx)("div",{className:we.a.imageWrapper}),Object(s.jsx)("h2",{className:we.a.name,children:n.name})]},a)}))})})}}]),a}(n.Component),Ae=Object(p.b)((function(e){return{chats:e.chats.chats}}))(De),Te=a(45),Re=a.n(Te),ke=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={images:[]},e.selectFiles=function(t){console.log(typeof t.target.files),Array.from(t.target.files).forEach((function(t,a){console.log(t);var s=new FileReader;s.onloadend=function(t){e.setState((function(e){return{images:[].concat(Object(ve.a)(e.images),[t.target.result])}}))},s.readAsDataURL(t)}))},e.inputTextRef=r.a.createRef(),e.inputFileRef=r.a.createRef(),e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.initImage?this.setState((function(t){return{images:[].concat(Object(ve.a)(t.images),[e.props.initImage])}})):this.inputFileRef.current.click(),console.log("imageInputModal",this.props.initImage)}},{key:"render",value:function(){var e=this;return Object(s.jsx)(re,{close:this.props.close,show:this.props.show,children:Object(s.jsxs)("div",{className:Re.a.Component,children:[this.state.images.length>0?Object(s.jsx)("div",{className:Re.a.Images,children:Object(s.jsx)(xe,{images:this.state.images})}):Object(s.jsx)("div",{className:Re.a.TitleNoImages,children:"\u041d\u0435\u0442 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0439, \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0445"}),Object(s.jsxs)("div",{className:Re.a.ControlButtons,children:[Object(s.jsx)("input",{className:Re.a.InputText,type:"text",ref:this.inputTextRef,placeholder:"\u041f\u043e\u0434\u043f\u0438\u0441\u044c"}),Object(s.jsxs)("div",{className:Re.a.InputWrapper,children:[Object(s.jsx)("input",{multiple:!0,id:"inputFile",type:"file",onChange:this.selectFiles,style:{display:"none"}}),Object(s.jsx)("label",{className:Re.a.Button,ref:this.inputFileRef,for:"inputFile",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043b"})]}),Object(s.jsx)("button",{className:Re.a.Button,onClick:function(){e.props.send(!1,e.inputTextRef.current.value,e.state.images),e.props.close()},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})})}}]),a}(n.Component),Ue=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={selectMessages:[],canDeleteMessages:!1,forwardMessages:!1,showImageModal:!1,imageModalInitImage:null,replyMessage:null},e.sendMessage=function(t,a,s){t?e.props.sendMessage(e.props.match.params.id,e.inputRef.current.value,null,e.state.replyMessage):e.props.sendMessage(e.props.match.params.id,a,s,e.state.replyMessage),e.inputRef.current.value=""},e.getMessageFromChatEntry=function(t){var a=e.props.chats[e.props.match.params.id];return a.messages[t]?e.props.messages[a.messages[t].message]:null},e.deleteMessages=function(){e.props.chats[e.props.match.params.id];e.state.selectMessages.map((function(t){e.state.canDeleteMessages&&e.props.deleteMessage(e.props.match.params.id,t)})),e.setState({selectMessages:[]})},e.SelectConfig={},e.toggleSelectMessageHandler=function(t,a){"mousedown"==a.type&&(e.SelectConfig[t]=Date.now(),-1!=e.state.selectMessages.indexOf(t)&&e.toggleSelectMessage(t)),"mouseup"==a.type&&(Date.now()-e.SelectConfig[t])/1e3>.2&&(e.toggleSelectMessage(t),e.SelectConfig[t]=0)},e.toggleSelectMessage=function(t){var a=Object(ve.a)(e.state.selectMessages);-1==e.state.selectMessages.indexOf(t)?a.push(t):a.splice(a.indexOf(t),1);var s=e.canDeleteMessages(a);e.setState({selectMessages:a,canDeleteMessages:s})},e.canDeleteMessages=function(t){var a=e.props.UID,s=e.props.chats[e.props.match.params.id].creator,n=!0;return t.length<1?n=!1:t.forEach((function(t){var r;n*=(a==s||a==(null===(r=e.getMessageFromChatEntry(t))||void 0===r?void 0:r.user))&&!!e.props.chats[e.props.match.params.id].messages[t]})),!!n},e.showImageModal=function(){e.setState({showImageModal:!0})},e.hideImageModal=function(){e.setState({showImageModal:!1,imageModalInitImage:null})},e.chekClipboard=function(t){if(t.clipboardData.files.length>0){var a=t.clipboardData.files[0],s=new FileReader;s.onloadend=function(t){t.target.result.match(t)&&e.setState({showImageModal:!0,imageModalInitImage:t.target.result})},s.readAsDataURL(a)}},e.forwardMessages=function(t){e.setState({forwardMessages:!0}),e.state.selectMessages.forEach((function(a){e.props.forwardMessage(t,e.getMessageFromChatEntry(a))})),e.setState({forwardMessages:!1,selectMessages:[]}),e.props.history.push("/chats/"+t)},e.inputRef=r.a.createRef(),e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",(function(){e.forceUpdate()}))}},{key:"componentDidUpdate",value:function(e,t){var a,s,n=this;if(this.props.match.params.id!=e.match.params.id)return this.setState({selectMessages:[],canDeleteMessages:!1,forwardMessages:!1}),this.props.chats[this.props.match.params.id]||this.props.getChat(this.props.match.params.id),void window.addEventListener("resize",(function(){n.forceUpdate()}));if((null===(a=this.props.chats[this.props.match.params.id])||void 0===a?void 0:a.messages)!=(null===(s=e.chats[this.props.match.params.id])||void 0===s?void 0:s.messages)){var r=Object(ve.a)(t.selectMessages),c=this.props.chats[this.props.match.params.id].messages,i=this.state.replyMessage;c?(r=r.filter((function(e){return c[e]})),i&&!c[i.chatMessageId]&&(i=!1)):(r=[],i=!1),this.setState({selectMessages:r,canDeleteMessages:this.canDeleteMessages(r),replyMessage:i})}}},{key:"render",value:function(){var e,t,a=this,n=this.props.chats[this.props.match.params.id],r=[];if(n&&n.messages&&Object.keys(n.messages).map((function(e,t){if(a.props.messages[n.messages[e].message]){var s=Object(D.a)(Object(D.a)({},a.getMessageFromChatEntry(e)),{},{chatMessageId:e});r.push(s)}})),r.sort((function(e,t){return e.date-t.date})),!n||"LOADING"==n)return Object(s.jsx)("div",{className:_e.a.Chat,children:Object(s.jsx)("div",{className:_e.a.Status,children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})});if("NOT_EXIST"==n)return Object(s.jsx)("div",{className:_e.a.Chat,onClick:function(){a.props.history.push("/chats")},children:Object(s.jsx)("div",{className:_e.a.Status,children:"\u0427\u0430\u0442\u0430 \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0438\u043b\u0438 \u043e\u043d \u0431\u044b \u0443\u0434\u0430\u043b\u0435\u043d"})});var c=null;c=this.state.selectMessages.length<1?Object(s.jsxs)("div",{className:_e.a.Header,style:{justifyContent:"flex-start"},children:[Object(s.jsx)("img",{className:_e.a.HeaderBackArrow,onClick:function(){a.props.history.push("/chats")},src:"/Images/backArrow.svg"}),Object(s.jsx)("div",{className:_e.a.HeaderName,children:n.name})]}):Object(s.jsxs)("div",{className:_e.a.Header,children:[Object(s.jsxs)("div",{className:_e.a.HeaderButtonsWrapper,children:[this.state.canDeleteMessages&&Object(s.jsx)("button",{className:_e.a.HeaderButton,onClick:this.deleteMessages,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),Object(s.jsx)("button",{className:_e.a.HeaderButton,onClick:function(){a.setState({forwardMessages:!0})},children:"\u041f\u0435\u0440\u0435\u0441\u043b\u0430\u0442\u044c"})]}),Object(s.jsx)("button",{className:_e.a.HeaderButtonCancel,onClick:function(){a.setState({selectMessages:[]})},children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]});var i=Math.max(document.documentElement.clientHeight,window.innerHeight||0);return Object(s.jsxs)("div",{className:_e.a.Chat,children:[c,Object(s.jsxs)("div",{className:_e.a.ChatWindow,style:{height:i-120},children:[r.map((function(e){return Object(s.jsx)(ye,{toggleSelectMessageHandler:function(t){a.toggleSelectMessageHandler(e.chatMessageId,t)},select:-1!=a.state.selectMessages.indexOf(e.chatMessageId),author:e.user==a.props.UID,message:e,onDoubleClick:function(){a.setState({replyMessage:e})},replyMessage:a.getMessageFromChatEntry(e.replyChatMessageId),user:a.props.users[e.user],forwardUser:e.isForward&&a.props.users[e.body.user]},e.id)})),this.state.replyMessage&&Object(s.jsx)("div",{className:_e.a.ReplyMessagesPadding})]}),Object.values(n.members).indexOf(this.props.UID)>-1?Object(s.jsxs)("div",{className:_e.a.InputWrapper,children:[this.state.replyMessage&&Object(s.jsxs)("div",{className:_e.a.ReplyWrapper,children:[Object(s.jsx)("div",{className:_e.a.ReplyUser,children:this.state.replyMessage.user}),Object(s.jsxs)("div",{className:_e.a.ReplyMessage,children:[this.state.replyMessage.images&&"\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f",this.state.replyMessage.images&&this.state.replyMessage.text&&", ",this.state.replyMessage.text&&this.state.replyMessage.text,(null===(e=this.state.replyMessage.body)||void 0===e?void 0:e.images)&&"\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f",this.state.replyMessage.images&&this.state.replyMessage.text&&", ",(null===(t=this.state.replyMessage.body)||void 0===t?void 0:t.text)&&this.state.replyMessage.text]}),Object(s.jsx)("span",{className:_e.a.ReplyCancel,onClick:function(){a.setState({replyMessage:null})},children:"\u2716"})]}),Object(s.jsx)("textarea",{ref:this.inputRef,className:_e.a.Input,onPaste:this.chekClipboard}),Object(s.jsx)("div",{className:_e.a.SendIconWrapper,onClick:this.showImageModal,children:Object(s.jsx)("img",{className:_e.a.SendIcon,src:"/Images/camera.svg"})}),Object(s.jsx)("div",{className:_e.a.SendIconWrapper,onClick:this.sendMessage,children:Object(s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-send "+_e.a.sendIcon,viewBox:"0 0 24 24",stroke:"#2c3e50",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[Object(s.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),Object(s.jsx)("line",{x1:"10",y1:"14",x2:"21",y2:"3"}),Object(s.jsx)("path",{d:"M21 3l-6.5 18a0.55 .55 0 0 1 -1 0l-3.5 -7l-7 -3.5a0.55 .55 0 0 1 0 -1l18 -6.5"})]})})]}):Object(s.jsx)("div",{onClick:function(){a.props.enterToChat(a.props.match.params.id)},children:"\u0412\u0441\u0442\u0443\u043f\u0438\u0442\u044c \u0432 \u0447\u0430\u0442"}),this.state.forwardMessages&&Object(s.jsx)(Ae,{startForward:this.forwardMessages,close:function(){a.setState({forwardMessages:!1})}}),this.state.showImageModal&&Object(s.jsx)(ke,{close:this.hideImageModal,show:this.state.showImageModal,text:this.inputRef.current.value,initImage:this.state.imageModalInitImage,send:this.sendMessage})]})}}]),a}(n.Component),We=Object(p.b)((function(e){return{chats:e.chats.chats,messages:e.chats.messages,UID:e.auth.UID,users:e.chats.users}}),(function(e){return{sendMessage:function(t,a,s,n){return e(function(e,t,a,s){return function(n,r){console.log("img",a);var c=r().auth.UID,i=w.a.database.ServerValue.TIMESTAMP;w.a.database().ref("messages/").push({user:c,text:t,images:a,date:i}).then((function(t){var a=null;s&&(a=s.chatMessageId),w.a.database().ref("chats/"+e+"/messagesData/messages").push({message:t.path.pieces_[1],replyChatMessageId:a}).then((function(){w.a.database().ref("chats/"+e+"/messagesData/lastChangeDate").set(i)}))}))}}(t,a,s,n))},deleteMessage:function(t,a){return e(function(e,t){return function(a,s){w.a.database().ref("/chats/"+e+"/messagesData/messages/"+t).remove()}}(t,a))},forwardMessage:function(t,a){return e(function(e,t){return function(a,s){var n=s().auth.UID,r=w.a.database.ServerValue.TIMESTAMP,c=null;c=t.isForward?Object(D.a)({},t.body):Object(D.a)({},t),console.log("AAA",c),w.a.database().ref("messages/").push({user:n,body:c,isForward:!0,date:r}).then((function(t){w.a.database().ref("chats/"+e+"/messagesData/messages/").push({message:t.path.pieces_[1]}).then((function(){w.a.database().ref("chats/"+e+"/messagesData/lastChangeDate").set(r)}))}))}}(t,a))},getChat:function(t){return e(R(t))},enterToChat:function(t){return e(A(t))}}}))(Object(U.g)(Ue)),Le=a(113),Ee=a.n(Le),Be=function(e){return Object(s.jsx)("div",{className:Ee.a.NoSelectChat,children:Object(s.jsx)("h1",{className:Ee.a.Title,children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0447\u0430\u0442..."})})},Fe=[],He=[{path:"/auth-email",Component:L}],Pe=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=window.innerWidth<651;return Object(s.jsxs)(r.a.Fragment,{children:[Object(s.jsxs)(U.d,{children:[e&&Object(s.jsx)(U.b,{path:F}),Object(s.jsx)(U.b,{path:"/chats",component:be})]}),!e&&Object(s.jsx)(U.b,{exact:!0,path:"/chats",component:Be}),Object(s.jsx)(U.b,{exact:!0,path:F,render:function(){return Object(s.jsx)(We,{})}})]})}}]),a}(n.Component),ze=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).pushInfo=function(){e.props.database.ref("/test").push({date:Date.now()}).then((function(e){}))},e.getInfo=function(){e.props.database.ref("/test").on("value",(function(e){}))},e.ChatRoute=function(){return Object(s.jsxs)(r.a.Fragment,{children:[Fe.map((function(e){var t=e.path,a=e.Component,n=e.isExact;return Object(s.jsx)(U.b,{exact:n,path:t,component:a},t)})),Object(s.jsx)(U.a,{to:"/chats"})]})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=Math.max(document.documentElement.clientHeight,window.innerHeight||0);return this.props.UID?Object(s.jsxs)("div",{className:B.a.MainWindow,style:{height:e},children:[Object(s.jsx)(Pe,{}),Object(s.jsx)(U.a,{from:"/",to:"/chats"})]}):Object(s.jsx)(r.a.Fragment,{children:Object(s.jsxs)(U.d,{children:[He.map((function(e){var t=e.path,a=e.Component;return Object(s.jsx)(U.b,{path:t,component:a},t)})),Object(s.jsx)(U.a,{exact:!0,to:"/auth-email"})]})})}}]),a}(n.Component),Xe=Object(p.b)((function(e){return{UID:e.auth.UID}}),(function(e){return{subscribeInit:function(){return e(T())}}}))(ze),Ve=a(75),Qe=a(167),Ge={UID:"isnP8gd3YmM0eQiRM0hIHr2hBhy1",isAuth:!0,loading:!1,error:null},Je=a(50),Ye={chats:{},messages:{},userChatsList:[],searchChatsList:[],users:{}};w.a.initializeApp({apiKey:"AIzaSyC2Gf1VqDDnCCth5xGCVbLL6coHBWJoq6Y",authDomain:"chat-cc558.firebaseapp.com",projectId:"chat-cc558",storageBucket:"chat-cc558.appspot.com",messagingSenderId:"802123311223",appId:"1:802123311223:web:13cd6546011edba6f9fe72"}),w.a.auth().setPersistence(w.a.auth.Auth.Persistence.NONE);var Ze=Object(Ve.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(D.a)(Object(D.a)({},e),{},{loading:!0,UID:null,error:null});case j:return Object(D.a)(Object(D.a)({},e),{},{loading:!1,UID:t.UID});case f:return Object(D.a)(Object(D.a)({},e),{},{loading:!1,error:t.error});case v:return Object(D.a)(Object(D.a)({},e),{},{loading:!1,UID:null,error:null});default:return e}},chats:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(D.a)(Object(D.a)({},e),{},{userChatsList:t.chatsList});case M:return Object(D.a)(Object(D.a)({},e),{},{searchChatsList:t.chatsList});case O:return Object(D.a)(Object(D.a)({},e),{},{chats:Object(D.a)(Object(D.a)({},e.chats),{},Object(Je.a)({},t.chatId,"LOADING"))});case _:var a=Object(D.a)({},e.chats),s={};return a[t.chatId].messages&&(s=Object(D.a)({},a[t.chatId].messages)),a[t.chatId]=Object(D.a)(Object(D.a)({},t.chatData),{},{messages:s}),Object(D.a)(Object(D.a)({},e),{},{chats:a});case I:var n=Object(D.a)({},e.chats);return n[t.chatId]="NOT_EXIST",Object(D.a)(Object(D.a)({},e),{},{chats:n});case N:var r={};e.chats[t.chatId].messages&&(r=Object(D.a)(Object(D.a)({},e.chats[t.chatId].messages),{},Object(Je.a)({},t.chatMessageId,t.chatMessage)));var c=t.lastChangeMessagesDate;return e.chats[t.chatId]&&e.chats[t.chatId].lastChangeMessagesDate>c&&(c=e.chats[t.chatId].lastChangeMessagesDate),Object(D.a)(Object(D.a)({},e),{},{chats:Object(D.a)(Object(D.a)({},e.chats),{},Object(Je.a)({},t.chatId,Object(D.a)(Object(D.a)({},e.chats[t.chatId]),{},{messages:r,lastChangeMessagesDate:c})))});case y:if("NOT_EXIST"==e.chats[t.chatId])return e;var i={};return e.chats[t.chatId].messages&&(i=Object(D.a)({},e.chats[t.chatId].messages)),delete i[t.chatMessageId],Object(D.a)(Object(D.a)({},e),{},{chats:Object(D.a)(Object(D.a)({},e.chats),{},Object(Je.a)({},t.chatId,Object(D.a)(Object(D.a)({},e.chats[t.chatId]),{},{messages:i})))});case S:var o=Object(D.a)({},e.messages);return o[t.messageId]=Object(D.a)({},t.messageData),Object(D.a)(Object(D.a)({},e),{},{messages:o});case b:var l={};return t.isMainUser?l.public=t.userData:l=Object(D.a)({},t.userData),Object(D.a)(Object(D.a)({},e),{},{users:Object(D.a)(Object(D.a)({},e.users),{},Object(Je.a)({},t.user,l))});case C:return Ye;default:return e}}}),Ke=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ve.c,qe=Object(Ve.d)(Ze,Ke(Object(Ve.a)(Qe.a)));i.a.render(Object(s.jsx)(p.a,{store:qe,children:Object(s.jsx)(z.a,{children:Object(s.jsx)(Xe,{})})}),document.getElementById("root"))},51:function(e,t,a){e.exports={Auth:"Auth_Auth__B-LX6",Title:"Auth_Title__4bW4X",Input:"Auth_Input__3Zv2B",Button:"Auth_Button__20HHq",IsLogin:"Auth_IsLogin__1cf-g",Error:"Auth_Error__1yxbz"}},57:function(e,t,a){e.exports={ChatsList:"ChatsList_ChatsList__35uDu",Navigation:"ChatsList_Navigation__2ifgT",Input:"ChatsList_Input__2-9QZ",Burger:"ChatsList_Burger__38LSm",ChatsItems:"ChatsList_ChatsItems__2S-2i",AddWrapper:"ChatsList_AddWrapper__2N0lb",Add:"ChatsList_Add__2hIbP",NoSearchChat:"ChatsList_NoSearchChat__2aZpt"}},73:function(e,t,a){e.exports={Navigation:"Navigation_Navigation__100Lc",ListItem:"Navigation_ListItem__1UjXF"}},74:function(e,t,a){e.exports={wrapper:"ListModal_wrapper__Jxx3g",chat:"ListModal_chat__CWECD",name:"ListModal_name__151fD",imageWrapper:"ListModal_imageWrapper__1WcbH"}},86:function(e,t,a){e.exports={ImagesWrapper:"ImagesBlock_ImagesWrapper__3IWm0",Image:"ImagesBlock_Image__1ejWS",FocusImageWrapper:"ImagesBlock_FocusImageWrapper__3d_qO",FocusImage:"ImagesBlock_FocusImage__1rBos"}}},[[473,1,2]]]);
//# sourceMappingURL=main.78efdaf2.chunk.js.map